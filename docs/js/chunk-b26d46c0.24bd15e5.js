(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b26d46c0"],{1:function(e,a){},2:function(e,a){},3:function(e,a){},3443:function(e,a,t){"use strict";t.r(a);t("a481");var s=t("8bbf"),r=t.n(s),o=t("7bb1"),d=t("c1df"),l=t.n(d),i=t("1c46"),n=t.n(i);r.a.use(o.a);var m={name:"v-users-setting-form",$_veeValidate:{validator:"new"},props:["userData","disabled","password","showbtn","isavatar"],data:function(){return{dialog:!1,loadingDialog:!1,loadingText:"",select:null,items:["Item 1","Item 2","Item 3","Item 4"],userGroupItems:["Admin","User","Visitor"],genderItems:["Male","Female"],checkbox:null,dictionary:{attributes:{email:"E-mail Address"},custom:{name:{required:function(){return"Name can not be empty"},max:"The name field may not be greater than 40 characters"},username:{required:function(){return"Username can not be empty"},max:"The name field may not be greater than 40 characters"}}}}},mounted:function(){this.$validator.localize("en",this.dictionary),"Update"===this.showbtn?this.loadingText="Updating......":this.loadingText="Submiting......"},computed:{enabled:function(){return this.userDataFormated.is_active?"Account is enabled":"Account is disabled"},userGroupDisabled:function(){return!!this.isavatar||this.disabled},userDataFormated:function(){return this.formatUserData(this.userData)}},methods:{momentFormat:function(e){return l()(e).format("YYYY-MM-DD HH:mm:ss")},userGroupFormat:function(e){for(var a=[],t=0;t<e.length;t++)1===e[t]||"Admin"===e[t]?a.push("Admin"):2===e[t]||"User"===e[t]?a.push("User"):a.push("Visitor");return a},formatUserData:function(e){return e.join_date&&(e.join_date=this.momentFormat(e.join_date)),e.last_login_time&&(e.last_login_time=this.momentFormat(e.last_login_time)),e.usergroup&&(e.usergroup=this.userGroupFormat(e.usergroup)),e.last_login_ip&&(e.last_login_ip=e.last_login_ip.replace(/'/g,"")),e},cryptoPassword:function(e){return n.a.createHash("md5").update(e).digest("hex")},update:function(){var e=this;this.$validator.validateAll().then(function(){if(!("Submit"!==e.showbtn||e.userDataFormated.email&&e.userDataFormated.username))return"";e.loadingDialog=!0;var a=e;a.userDataFormated.usergroup||(a.userDataFormated.usergroup=["User"]);var t="";t="Update"===a.showbtn?"/api/set/user":"/api/add/user",a.$ajax.post(t,{userData:a.userDataFormated}).then(function(e){0===e.data.ret_code?(setTimeout(function(){a.loadingText="Success."},700),setTimeout(function(){a.loadingDialog=!1,a.$router.push({query:{r:Math.random()}})},1500)):(setTimeout(function(){a.loadingText="Failed: "+e.data.msg},700),setTimeout(function(){a.loadingDialog=!1},3e3)),"Update"===a.showbtn?a.loadingText="Updating......":a.loadingText="Submiting......"})})}}},u=(t("34ee"),t("2877")),c=t("6544"),v=t.n(c),p=t("8336"),b=t("a523"),f=t("0e8f"),x=t("4bd4"),g=t("a722"),w=t("b56d"),D=t("b73d"),F=t("2677"),h=Object(u.a)(m,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-form",{ref:"userSettingForm"},[t("v-container",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("span",{staticClass:"headline"},[e._v("Account information")])]),"Submit"!=e.showbtn?t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("uuid"),label:"User UUID","data-vv-name":"uuid",disabled:""},model:{value:e.userDataFormated.uuid,callback:function(a){e.$set(e.userDataFormated,"uuid",a)},expression:"userDataFormated.uuid"}})],1):e._e(),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:40",expression:"'required|max:40'"}],attrs:{counter:40,"error-messages":e.errors.collect("username"),label:"Username","data-vv-name":"username",required:"",disabled:e.disabled},model:{value:e.userDataFormated.username,callback:function(a){e.$set(e.userDataFormated,"username",a)},expression:"userDataFormated.username"}})],1),e.password&&"Submit"===e.showbtn?t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("password"),label:"Password","data-vv-name":"password",type:"password",disabled:e.disabled,required:""},model:{value:e.userDataFormated.password,callback:function(a){e.$set(e.userDataFormated,"password",a)},expression:"userDataFormated.password"}})],1):e._e(),e.password&&"Submit"===e.showbtn?t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("confirmPassword"),label:"Confirmed password","data-vv-name":"confirmPassword",type:"password",disabled:e.disabled,required:""},model:{value:e.userDataFormated.confirmPassword,callback:function(a){e.$set(e.userDataFormated,"confirmPassword",a)},expression:"userDataFormated.confirmPassword"}})],1):e._e(),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"max:40",expression:"'max:40'"}],attrs:{counter:40,"error-messages":e.errors.collect("name"),label:"Name","data-vv-name":"name",disabled:e.disabled},model:{value:e.userDataFormated.name,callback:function(a){e.$set(e.userDataFormated,"name",a)},expression:"userDataFormated.name"}})],1),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"error-messages":e.errors.collect("email"),label:"E-mail","data-vv-name":"email",disabled:e.disabled,required:""},model:{value:e.userData.email,callback:function(a){e.$set(e.userData,"email",a)},expression:"userData.email"}})],1),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-select",{attrs:{items:e.userGroupItems,attach:"",chips:"",label:"User Group","error-messages":e.errors.collect("usergroup"),"data-vv-name":"usergroup",multiple:"",required:"",disabled:e.userGroupDisabled},model:{value:e.userDataFormated.usergroup,callback:function(a){e.$set(e.userDataFormated,"usergroup",a)},expression:"userDataFormated.usergroup"}})],1),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-select",{attrs:{items:e.genderItems,attach:"",chips:"",label:"Gender","error-messages":e.errors.collect("gender"),"data-vv-name":"gender",required:"",disabled:e.disabled},model:{value:e.userDataFormated.gender,callback:function(a){e.$set(e.userDataFormated,"gender",a)},expression:"userDataFormated.gender"}})],1),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-switch",{attrs:{label:e.enabled,disabled:e.disabled},model:{value:e.userDataFormated.is_active,callback:function(a){e.$set(e.userDataFormated,"is_active",a)},expression:"userDataFormated.is_active"}})],1),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("age"),label:"Age","data-vv-name":"age",type:"number",disabled:e.disabled},model:{value:e.userDataFormated.age,callback:function(a){e.$set(e.userDataFormated,"age",a)},expression:"userDataFormated.age"}})],1),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("avatar"),label:"Avatar","data-vv-name":"avatar",disabled:e.disabled},model:{value:e.userDataFormated.avatar,callback:function(a){e.$set(e.userDataFormated,"avatar",a)},expression:"userDataFormated.avatar"}})],1),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("department"),label:"Department","data-vv-name":"department",disabled:e.disabled},model:{value:e.userDataFormated.department,callback:function(a){e.$set(e.userDataFormated,"department",a)},expression:"userDataFormated.department"}})],1),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("institution"),label:"Institution","data-vv-name":"institution",disabled:e.disabled},model:{value:e.userDataFormated.institution,callback:function(a){e.$set(e.userDataFormated,"institution",a)},expression:"userDataFormated.institution"}})],1),t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("location"),label:"Location","data-vv-name":"location",disabled:e.disabled},model:{value:e.userDataFormated.location,callback:function(a){e.$set(e.userDataFormated,"location",a)},expression:"userDataFormated.location"}})],1),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("phone"),label:"Phone","data-vv-name":"phone",disabled:e.disabled},model:{value:e.userDataFormated.phone,callback:function(a){e.$set(e.userDataFormated,"phone",a)},expression:"userDataFormated.phone"}})],1),t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("wechat"),label:"Wechat","data-vv-name":"wechat",disabled:e.disabled},model:{value:e.userDataFormated.wechat,callback:function(a){e.$set(e.userDataFormated,"wechat",a)},expression:"userDataFormated.wechat"}})],1),"Submit"!=e.showbtn?t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("last_login_time"),label:"Last login time","data-vv-name":"last_login_time",disabled:""},model:{value:e.userDataFormated.last_login_time,callback:function(a){e.$set(e.userDataFormated,"last_login_time",a)},expression:"userDataFormated.last_login_time"}})],1):e._e(),"Submit"!=e.showbtn?t("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("last_login_ip"),label:"Last login ip","data-vv-name":"last_login_ip",disabled:""},model:{value:e.userDataFormated.last_login_ip,callback:function(a){e.$set(e.userDataFormated,"last_login_ip",a)},expression:"userDataFormated.last_login_ip"}})],1):e._e(),"Submit"!=e.showbtn?t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("join_date"),label:"Join date","data-vv-name":"join_date",disabled:""},model:{value:e.userDataFormated.join_date,callback:function(a){e.$set(e.userDataFormated,"join_date",a)},expression:"userDataFormated.join_date"}})],1):e._e(),e.password&&"Update"===e.showbtn?t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("span",{staticClass:"headline"},[e._v("Change Password")]),t("v-text-field",{attrs:{"error-messages":e.errors.collect("oldpassword"),label:"Old password","data-vv-name":"oldpassword",type:"password",disabled:e.disabled},model:{value:e.userDataFormated.oldpassword,callback:function(a){e.$set(e.userDataFormated,"oldpassword",a)},expression:"userDataFormated.oldpassword"}})],1):e._e(),e.password&&"Update"===e.showbtn?t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("newpassword"),label:"New password","data-vv-name":"newpassword",type:"password",disabled:e.disabled},model:{value:e.userDataFormated.newpassword,callback:function(a){e.$set(e.userDataFormated,"newpassword",a)},expression:"userDataFormated.newpassword"}})],1):e._e(),e.password&&"Update"===e.showbtn?t("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t("v-text-field",{attrs:{"error-messages":e.errors.collect("confirmNewPassword"),label:"Confirmed new password","data-vv-name":"confirmNewPassword",type:"password",disabled:e.disabled},model:{value:e.userDataFormated.confirmNewPassword,callback:function(a){e.$set(e.userDataFormated,"confirmNewPassword",a)},expression:"userDataFormated.confirmNewPassword"}})],1):e._e(),e.showbtn?t("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[t("v-btn",{attrs:{disabled:e.loadingDialog,loading:e.loadingDialog,color:"primary"},on:{click:e.update}},[e._v(e._s(e.showbtn))])],1):e._e(),t("b-progress-message",{attrs:{loading:e.loadingDialog,loadingText:e.loadingText}})],1)],1)],1)},[],!1,null,null,null);a.default=h.exports;v()(h,{VBtn:p.a,VContainer:b.a,VFlex:f.a,VForm:x.a,VLayout:g.a,VSelect:w.a,VSwitch:D.a,VTextField:F.a})},"34ee":function(e,a,t){"use strict";var s=t("936e");t.n(s).a},4:function(e,a){},"47c3":function(e,a,t){(e.exports=t("24fb")(!1)).push([e.i,".user-setting-form{color:#000}",""])},"936e":function(e,a,t){var s=t("47c3");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,t("499e").default)("3be3c17b",s,!0,{sourceMap:!1,shadowMode:!1})}}]);